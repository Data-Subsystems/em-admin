# EM Admin - Конфигуратор Табло

## Обзор

EM Admin — веб-приложение для настройки цветов табло Electro-Mech. Пользователи могут просматривать 429 моделей табло, выбирать цвета для лицевой панели, акцентных полос и LED-дисплеев, а также видеть предпросмотр в реальном времени с использованием технологии замены цветов на canvas.

## Возможности

### Библиотека табло
- Просмотр всех 429 моделей табло Electro-Mech
- Визуальная сетка с названиями моделей
- Клик по любому табло для выбора и настройки

### Настройка цветов
- **Цвет лицевой панели**: 18 вариантов цвета для основного корпуса
- **Цвет акцента**: 18 вариантов для акцентных полос (или без них)
- **Цвет LED**: Красный или янтарный для цифровых дисплеев
- Предпросмотр обновляется в реальном времени при выборе цветов
- Замена цветов на уровне пикселей сохраняет детали изображения

### AI-анализ (опционально)
- Модель машинного зрения AWS Bedrock Nova Lite
- Определение зон и типов компоновки табло
- Идентификация вида спорта и функций
- Поддержка пакетной обработки

## Палитра цветов

### Цвета лицевой панели (18 вариантов)
| Цвет | HEX-код |
|------|---------|
| Тёмно-синий (Navy Blue) | #003366 |
| Египетский синий (Egyptian Blue) | #1034A6 |
| Королевский синий (Royal Blue) | #4169E1 |
| Ледяной синий (Icy Blue) | #71A6D2 |
| Зелёный клевер (Shamrock Green) | #009E60 |
| Весёлый зелёный (Jolly Green) | #228B22 |
| Охотничий зелёный (Hunter Green) | #355E3B |
| Серебристо-серый (Silver Gray) | #C0C0C0 |
| Матовый чёрный (Matte Black) | #28282B |
| Белый (White) | #FFFFFF |
| Индиго (Indigo Purple) | #4B0082 |
| Мощный фиолетовый (Power Purple) | #7B68EE |
| Бордовый (Merchant Maroon) | #800000 |
| Кардинальский красный (Cardinal Red) | #C41E3A |
| Гоночный красный (Racing Red) | #D40000 |
| Тигровый оранжевый (Tiger Orange) | #FF6A00 |
| Золотисто-жёлтый (Golden Yellow) | #FFD700 |
| Металлическое золото (Metallic Gold) | #D4AF37 |

### Цвета LED
| Цвет | HEX-код |
|------|---------|
| Красный (Red) | #FF0000 |
| Янтарный (Amber) | #FFBF00 |

## Техническая архитектура

### Фронтенд
- **Фреймворк**: Next.js 14 с App Router
- **Стилизация**: Tailwind CSS
- **Состояние**: React useState с сохранением в localStorage
- **Обработка изображений**: HTML5 Canvas API

### Бэкенд
- **База данных**: Supabase (PostgreSQL)
- **Хранилище изображений**: AWS S3 (бакет em-admin-assets)
- **AI-анализ**: AWS Bedrock Nova Lite
- **Деплой**: Vercel

### Ключевые компоненты

#### ColorizedScoreboard
Компонент на базе canvas, который применяет пользовательские цвета к изображениям табло в реальном времени:

1. Загружает оригинальное изображение табло
2. Анализирует каждый пиксель в цветовом пространстве HSL
3. Определяет типы пикселей:
   - Пиксели лицевой панели (тёмная/средняя яркость)
   - LED-пиксели (яркий красный/янтарный)
   - Акцентные пиксели (серый/серебристый)
4. Заменяет цвета, сохраняя яркость и детали

## API-эндпоинты

| Метод | Эндпоинт | Описание |
|-------|----------|----------|
| GET | /api/scoreboards | Список всех моделей табло |
| GET | /api/scoreboards/[id] | Получить детали конкретного табло |
| POST | /api/scoreboards/import | Импорт табло из файлов данных |
| POST | /api/scoreboards/[id]/analyze | Анализ изображения с помощью AI |
| GET | /api/analyze/batch | Статус пакетного анализа |
| POST | /api/analyze/batch | Запуск пакетного анализа |

## Переменные окружения

```env
# Supabase
SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=

# AWS
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
```

## Разработка

```bash
# Установка зависимостей
npm install

# Запуск сервера разработки
npm run dev

# Сборка для продакшена
npm run build

# Запуск линтера
npm run lint
```

## Источники данных

- **Изображения**: 429 PNG-файлов от Electro-Mech, хранятся в S3
- **Цвета**: JSON-конфигурация с доступными вариантами цветов
- **URL**: `https://img.electro-mech.com/images/`

## Поддержка браузеров

- Chrome 80+
- Firefox 75+
- Safari 13+
- Edge 80+

Для функций настройки цветов требуется поддержка HTML5 Canvas.
